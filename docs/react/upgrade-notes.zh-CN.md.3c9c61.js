(self.webpackChunk_ant_design_react_native=self.webpackChunk_ant_design_react_native||[]).push([[3410],{16420:n=>{n.exports={content:["article",["p","此处着重列出升级中的不兼容变化和推荐改动。所有变动请见 ",["a",{title:null,href:"/changelog"},"Changelog"],"。"],["h3","4.2.0"],["blockquote",["p","安装 peer 依赖"]],["pre",{lang:"bash",highlighted:'<span class="token function">npm</span> <span class="token function">install</span> @react-native-community/cameraroll @react-native-picker/picker @react-native-community/segmented-control @react-native-community/slider react-native-pager-view react-native-gesture-handler'},["code","npm install @react-native-community/cameraroll @react-native-picker/picker @react-native-community/segmented-control @react-native-community/slider react-native-pager-view react-native-gesture-handler"]],["p","or"],["pre",{lang:"bash",highlighted:"yarn add @react-native-community/cameraroll @react-native-picker/picker @react-native-community/segmented-control @react-native-community/slider react-native-pager-view react-native-gesture-handler"},["code","yarn add @react-native-community/cameraroll @react-native-picker/picker @react-native-community/segmented-control @react-native-community/slider react-native-pager-view react-native-gesture-handler"]],["h3","4.1.0"],["blockquote",["p","升级到 4.0.0+需要安装 peer 依赖然后 link"]],["pre",{lang:"bash",highlighted:'<span class="token function">npm</span> <span class="token function">install</span> @react-native-community/cameraroll @react-native-picker/picker @react-native-community/segmented-control @react-native-community/slider react-native-pager-view'},["code","npm install @react-native-community/cameraroll @react-native-picker/picker @react-native-community/segmented-control @react-native-community/slider react-native-pager-view"]],["p","or"],["pre",{lang:"bash",highlighted:"yarn add @react-native-community/cameraroll @react-native-picker/picker @react-native-community/segmented-control @react-native-community/slider react-native-pager-view"},["code","yarn add @react-native-community/cameraroll @react-native-picker/picker @react-native-community/segmented-control @react-native-community/slider react-native-pager-view"]],["blockquote",["p","安装完依赖后需要到 iOS 目录 ",["code","pod install"],"(auto linking)，Android 不需要手动处理"]],["h3","链接字体图标"],["pre",{lang:"bash",highlighted:'<span class="token comment" spellcheck="true"># 手动链接字体图标</span>\nnpx react-native <span class="token function">link</span>'},["code","# 手动链接字体图标\nnpx react-native link"]],["h3","3.0.0"],["p",["strong","3.0.0"],"开始需要安装 ",["code","react-native@0.57.x"]],["ul",["li",["p","修改之前的 import 方式改成 ",["code","import { Button, ... } from '@ant-design/react-native"]]],["li",["p","多语言以及主题，由之前的 ",["code","LocaleProvider"]," 改成",["code","Provider"],"，现在的",["code","Provider"]," 支持",["code","theme"],"跟",["code","locale"],"，Provider 必须在 app 入口指定，不然部分组件用不了（因为现在支持多个 Modal 以及在 Modal 上面显示 Toast）"]],["li",["p","Provider 配置"],["pre",{lang:"jsx",highlighted:'<span class="token comment" spellcheck="true">// 动态主题配置可以查看 ./rn-kitchen-sink/app.js</span>\n<span class="token keyword">const</span> RootNavigator <span class="token operator">=</span> <span class="token function">createStackNavigator</span><span class="token punctuation">(</span>scenes<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>\n    theme<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n    currentTheme<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  changeTheme <span class="token operator">=</span> <span class="token punctuation">(</span>theme<span class="token punctuation">,</span> currentTheme<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> theme<span class="token punctuation">,</span> currentTheme <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> theme<span class="token punctuation">,</span> currentTheme <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Provider</span> <span class="token attr-name">theme</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RootNavigator</span>\n          <span class="token attr-name">screenProps</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> changeTheme<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>changeTheme<span class="token punctuation">,</span> currentTheme <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Provider</span><span class="token punctuation">></span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>'},["code","// 动态主题配置可以查看 ./rn-kitchen-sink/app.js\nconst RootNavigator = createStackNavigator(scenes);\nclass App extends React.Component {\n  state = {\n    theme: null,\n    currentTheme: null,\n  };\n  changeTheme = (theme, currentTheme) => {\n    this.setState({ theme, currentTheme });\n  };\n  render() {\n    const { theme, currentTheme } = this.state;\n    return (\n      <Provider theme={theme}>\n        <RootNavigator\n          screenProps={{ changeTheme: this.changeTheme, currentTheme }}\n        />\n      </Provider>\n    );\n  }\n}"]]],["li",["p","样式重写"],["ul",["li",["p","通过 ",["code","Provider"]," 的 theme 配置默认的全局主题样式"]],["li",["p","通过组件的 styles 覆盖局部组件样式，不需要导入当前组件的所有样式"]],["li",["p","不需要像 2.x 那样导入一个样式文件，现在的样式文件返回的是一个 function 而不是一个对象了"]]]],["li",["p","Toast 移除了 ",["code","hide"]," 方法"]],["li",["p","修改",["code","Grid"],"的",["code","onClick"],"属性为",["code","onPress"]]],["li",["p","Link Icon Fonts"],["pre",{lang:"sh",highlighted:'react<span class="token operator">-</span>native link <span class="token variable">@ant</span><span class="token operator">-</span>design<span class="token operator">/</span>icons<span class="token operator">-</span>react<span class="token operator">-</span>native'},["code","react-native link @ant-design/icons-react-native"]],["p","如果你使用的是 react-native@0.60.x 会自动 link，如需手动 link 请使用"],["pre",{lang:"sh",highlighted:'react<span class="token operator">-</span>native link <span class="token variable">@ant</span><span class="token operator">-</span>design<span class="token operator">/</span>react<span class="token operator">-</span>native'},["code","react-native link @ant-design/react-native"]]]],["h3","2.1.11 and before"],["p",["a",{title:null,href:"https://github.com/ant-design/ant-design-mobile/blob/master/docs/react/upgrade-notes.zh-CN.md"},"antd-mobile upgrade-notes"]]],meta:{order:4,title:"升级指南",filename:"docs/react/upgrade-notes.zh-CN.md"}}}}]);